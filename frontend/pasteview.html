<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FileDB</title>
<link rel="stylesheet" href="main.css">
</head>
<body>
<h1 id="pasteTitleView"></h1>
<h2 id="pasteLanguageView"></h2>
<p id="pasteCharCount"></p>
<pre id="pasteContentView"></pre>
<button id="copyUrl">Copy Shareable URL</button>
<script>
const params = new URLSearchParams(window.location.search)
const id = params.get('id')
if (id) {
  fetch(`/api/paste?id=${id}`)
    .then(res => res.json())
    .then(data => {
      document.getElementById('pasteTitleView').textContent = data.title
      document.getElementById('pasteLanguageView').textContent = "Language: " + data.language
      document.getElementById('pasteCharCount').textContent = "Characters: " + data.content.length
      document.getElementById('pasteContentView').textContent = data.content
      document.getElementById('copyUrl').addEventListener('click', () => {
        navigator.clipboard.writeText(window.location.href)
        alert('URL copied!')
      })
    })
    .catch(() => document.getElementById('pasteContentView').textContent = 'Paste not found.')
}
</script>
</body>
</html>
